# description	: Standalone web browser from mozilla.org - Extended Support Release 
# depends	: gtk3 libxt nss dbus-glib  
# optional	: apulse patchelf

name=firefox-esr-bin
version=102.5.0
release=1
source="https://ftp.mozilla.org/pub/firefox/releases/${version}esr/linux-x86_64/en-US/firefox-${version}esr.tar.bz2
$name.desktop"

build() {
 	install -d \
		$PKG/usr/bin \
		$PKG/usr/share/applications \
		$PKG/usr/share/pixmaps \
		$PKG/opt

	cp -r firefox/ $PKG/opt/$name

	# Patch alsa support, install apulse and patchelf and rebuild firefox-esr-bin again
        scratch isinstalled apulse && patchelf --set-rpath /usr/lib/apulse $PKG/opt/firefox-esr-bin/libxul.so

	ln -s /opt/$name/firefox $PKG/usr/bin/$name
	install -m644 $name.desktop $PKG/usr/share/applications/
	install -m644 firefox/browser/chrome/icons/default/default128.png $PKG/usr/share/pixmaps/$_pkgname.png}

}
