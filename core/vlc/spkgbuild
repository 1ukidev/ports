# description	: A media player, streamer, and encoder
# depends	: alsa-lib ffmpeg liba52 libgcrypt libmad lua

name=vlc
version=3.0.3
release=1
source=(https://download.videolan.org/$name/$version/$name-$version.tar.xz)
md5sum=(cf01d4755c719fe1c8605ceb40d8f1d2)

build() {
	cd $name-$version

	# This command allows building with the current version of Lua-5.3.4
	sed -i '/vlc_demux.h/a #define LUA_COMPAT_APIINTCASTS' modules/lua/vlc.h

	# This command allows building with the current version of FreeType-2.9
	sed -i '/DEPRECATED/s:^://:'  modules/text_renderer/freetype/text_layout.c

	# This command allows building with the current version of Qt-5.11.1
	sed -i '/#include <QString>/i#include <QButtonGroup>' \
	        modules/gui/qt/components/simple_preferences.cpp

        BUILDCC=gcc ./configure --prefix=/usr --disable-opencv
	make
	make DESTDIR=$PKG install
}

