# description	: Provides a platform-neutral API for system level and libc like functions
# homepage	: https://developer.mozilla.org/en-US/docs/Mozilla/Projects/NSPR
# maintainer	: emmett1, emmett1.2miligrams at gmail.com

name=nspr
version=4.22
release=1
source=(https://archive.mozilla.org/pub/$name/releases/v$version/src/$name-$version.tar.gz)
md5sum=(4a5a0bc6b56c9a1281185b863e70da81)

build() {
	cd $name-$version/$name

	# disables installing two unneeded scripts
	sed -ri 's#^(RELEASE_BINS =).*#\1#' pr/src/misc/Makefile.in

	# disables installing the static libraries
	sed -i 's#$(LIBRARY) ##' config/rules.mk

	./configure --prefix=/usr \
	            --with-mozilla \
	            --with-pthreads \
	            --enable-64bit
	make
	make DESTDIR=$PKG install
}
