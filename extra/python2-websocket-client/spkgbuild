# description	: WebSocket client library for Python (python2)
# depends	: python2-six python2

name=python2-websocket-client
version=0.47.0
release=1
source=(https://pypi.io/packages/source/w/websocket-client/websocket_client-$version.tar.gz
	use-system-ca.patch)
md5sum=(790b3ecb5364293ad70c59a1b92debb1
	c34c7f6fddbe5758d84b9d3cfdd92108)

build() {
	cd websocket_client-$version

	patch -p1 -i ../use-system-ca.patch
	rm websocket/cacert.pem

	sed -i "s/'backports.ssl_match_hostname'//" setup.py
	
	python2 setup.py build
	python2 setup.py install --root=$PKG --optimize=1
	mv $PKG/usr/bin/wsdump{,2}.py
}
