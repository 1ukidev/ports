# description	: Classes for a WebKit2 based implementation and a new QML API
# depends	: qt5 libwebp libxslt libxcomposite gst-plugins-base hyphen cmake ruby gperf python2

name=qt5-webkit
_qtver=5.212.0-alpha3
version=${_qtver/-/}
release=1
source=(https://github.com/annulen/webkit/releases/download/qtwebkit-$_qtver/qtwebkit-$_qtver.tar.xz)
md5sum=(5e7ade75ad0df9047826e625e4f262fc)

build() {
	cd qtwebkit-$_qtver

	mkdir -p build
	cd build

	cmake \
	  -DCMAKE_INSTALL_PREFIX=/usr \
	  -DCMAKE_BUILD_TYPE=Release \
	  -DPORT=Qt \
	  -DENABLE_TOOLS=OFF ..
	make
	make DESTDIR=$PKG install

	# Fix pkgconfig files
	sed -e 's|qt/Qt5WebKit|qt/QtWebKit|' -i "$PKG"/usr/lib/pkgconfig/Qt5WebKit.pc
	sed -e 's|qt/Qt5WebKitWidgets|qt/QtWebKitWidgets|' -i "$PKG"/usr/lib/pkgconfig/Qt5WebKitWidgets.pc
	sed -e '/Name/a Description: Qt WebKit module' -i "$PKG"/usr/lib/pkgconfig/Qt5WebKit.pc
	sed -e '/Name/a Description: Qt WebKitWidgets module' -i "$PKG"/usr/lib/pkgconfig/Qt5WebKitWidgets.pc
}
